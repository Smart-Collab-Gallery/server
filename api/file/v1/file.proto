syntax = "proto3";

package api.file.v1;

import "google/api/annotations.proto";

option go_package = "smart-collab-gallery-server/api/file/v1;v1";
option java_multiple_files = true;
option java_package = "api.file.v1";

service File {
  // 获取上传预签名 URL
  rpc GetUploadPresignedUrl (GetUploadPresignedUrlRequest) returns (GetUploadPresignedUrlReply) {
    option (google.api.http) = {
      post: "/api/file/upload/presigned"
      body: "*"
    };
  }
}

// 获取上传预签名 URL 请求
message GetUploadPresignedUrlRequest {
  string file_name = 1;           // 文件名（包含扩展名）
  string content_type = 2;         // 文件 MIME 类型（可选）
}

// 获取上传预签名 URL 响应
message GetUploadPresignedUrlReply {
  string upload_url = 1;           // 预签名上传 URL
  string file_key = 2;             // 文件在 COS 中的完整路径（key）
  string access_url = 3;           // 上传成功后的访问 URL
  int64 expire_time = 4;           // 过期时间（Unix 时间戳）
}
